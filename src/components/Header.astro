---
import Logo from './Logo.astro';
---

<header
  id="main-header"
  class="fixed top-0 right-0 left-0 z-50 bg-transparent px-3 py-4 transition-all duration-300 ease-in-out"
>
  <div class="mx-auto flex max-w-5xl items-center justify-between px-4">
    <Logo sizeClass="h-10" />

    <nav class="hidden space-x-8 lg:flex">
      <a
        href="#features"
        class="nav-link text-foreground/70 hover:text-primary font-medium transition-all duration-200 ease-in-out hover:scale-105"
        >Features</a
      >
      <a
        href="#how-it-works"
        class="nav-link text-foreground/70 hover:text-primary font-medium transition-all duration-200 ease-in-out hover:scale-105"
        >How It Works</a
      >
      <a
        href="#testimonials"
        class="nav-link text-foreground/70 hover:text-primary font-medium transition-all duration-200 ease-in-out hover:scale-105"
        >Testimonials</a
      >
      <a
        href="#pricing"
        class="nav-link text-foreground/70 hover:text-primary font-medium transition-all duration-200 ease-in-out hover:scale-105"
        >Pricing</a
      >
    </nav>

    <div class="hidden items-center space-x-4 lg:flex">
      <a
        href="/login"
        class="nav-link text-foreground/70 hover:text-primary font-medium transition-all duration-200 ease-in-out hover:scale-105"
        >Log in</a
      >
      <a
        href="/signup"
        class="bg-primary text-primary-foreground hover:bg-primary/90 rounded-full px-5 py-2.5 font-semibold shadow-sm transition-all duration-200 hover:scale-105 active:scale-95"
      >
        Get Started
      </a>
    </div>

    <button
      id="menu-toggle"
      class="hover:bg-muted text-foreground rounded-md p-2 focus:outline-none lg:hidden"
    >
      <svg
        id="menu-icon"
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <line x1="4" y1="6" x2="20" y2="6"></line>
        <line x1="4" y1="12" x2="20" y2="12"></line>
        <line x1="4" y1="18" x2="20" y2="18"></line>
      </svg>
    </button>
  </div>

  <div
    id="mobile-menu"
    class="animate-slide-down border-border mx-3 mt-3 hidden rounded-2xl border bg-white/95 px-6 py-8 shadow-lg backdrop-blur-md lg:hidden"
  >
    <nav class="flex flex-col space-y-6">
      <a
        href="#features"
        class="mobile-link text-foreground/80 hover:text-primary text-lg font-medium transition-all duration-200 hover:translate-x-2"
        >Features</a
      >
      <a
        href="#how-it-works"
        class="mobile-link text-foreground/80 hover:text-primary text-lg font-medium transition-all duration-200 hover:translate-x-2"
        >How It Works</a
      >
      <a
        href="#testimonials"
        class="mobile-link text-foreground/80 hover:text-primary text-lg font-medium transition-all duration-200 hover:translate-x-2"
        >Testimonials</a
      >
      <a
        href="#pricing"
        class="mobile-link text-foreground/80 hover:text-primary text-lg font-medium transition-all duration-200 hover:translate-x-2"
        >Pricing</a
      >

      <div class="border-border flex justify-between space-y-4 border-t pt-6">
        <a
          href="/login"
          class="mobile-link text-foreground/80 hover:text-primary text-lg font-medium transition-all"
          >Log in</a
        >
        <a
          href="/signup"
          class="bg-primary text-primary-foreground rounded-full px-4 py-3 text-center font-bold shadow-md transition-all active:scale-95"
        >
          Get Started
        </a>
      </div>
    </nav>
  </div>
</header>

<script>
  // Elements
  const header = document.getElementById('main-header');
  const menuToggle = document.getElementById('menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');

  // Scroll Logic
  window.addEventListener('scroll', () => {
    if (window.scrollY > 10) {
      header?.classList.add('bg-white/80', 'backdrop-blur-md', 'shadow-sm');
      header?.classList.remove('bg-transparent');
    } else {
      header?.classList.remove('bg-white/80', 'backdrop-blur-md', 'shadow-sm');
      header?.classList.add('bg-transparent');
    }
  });

  // Toggle Logic
  menuToggle?.addEventListener('click', () => {
    const isHidden = mobileMenu?.classList.toggle('hidden');
    if (menuIcon) {
      menuIcon.innerHTML = isHidden
        ? `<line x1="4" y1="6" x2="20" y2="6"></line><line x1="4" y1="12" x2="20" y2="12"></line><line x1="4" y1="18" x2="20" y2="18"></line>`
        : `<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>`;
    }
  });

  // Mobile links logic
  document.querySelectorAll('.mobile-link').forEach((link) => {
    link.addEventListener('click', () => {
      mobileMenu?.classList.add('hidden');
      if (menuIcon) {
        menuIcon.innerHTML = `<line x1="4" y1="6" x2="20" y2="6"></line><line x1="4" y1="12" x2="20" y2="12"></line><line x1="4" y1="18" x2="20" y2="18"></line>`;
      }
    });
  });
</script>
